Site.productSlide={};(function(B,K,l){var q,C=-1,L,h,ae,aa=null,f="",R="",y;K.data={};K.dom={};function w(){var ag=[];ag.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">');ag.push('	<div class="f-contentBg J_contentBg"></div>');ag.push('	<div class="f-content J_content" id="fk-productSlideContent">');ag.push('		<div class="f-innerContent">');S(ag);ag.push("		</div>");ag.push('		<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>');ag.push('		<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>');ag.push('		<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>');ag.push("	</div>");ag.push("</div>");return ag}function S(ag){ag.push('<div class="f-multiContent J_multiContent">');A(ag);ag.push("</div>");ag.push('<div class="f-albumsContent J_albumsContent">');u(ag);ag.push("</div>")}function A(ag){ag.push('<div class="f-multiContent-left J_multiContentLeft">');z(ag);ag.push("</div>");ag.push('<div class="f-multiContent-right J_multiContentRight">');O(ag);ag.push("</div>")}function z(ag){ag.push('<div class="f-productPicContent J_productPicContent">');ag.push('	<div class="f-productImg J_productImg">');ag.push('		<div class="f-productImgLoading"></div>');ag.push("	</div>");ag.push('	<div class="f-productImgGroup J_productImgGroup" style="display:none;">');ag.push('		<div class="f-productImgGroupBg"></div>');ag.push('		<div class="f-imgListWrap J_imgListWrap">');ag.push("		</div>");ag.push('		<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>');ag.push('		<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>');ag.push("	</div>");ag.push("</div>");ag.push('<div class="f-shareContent J_shareContent">');ag.push("</div>")}function O(ag){ag.push('<div class="f-productDetailContent J_productDetailContent">');ag.push("</div>");ag.push('<div class="f-productBuyContent J_productBuyContent">');ag.push("</div>")}function J(){if(!K.data.nowData){return""}var an=[],at=[],aC=K.data,av=aC.nowData,al=av.propList||[],aq=typeof(av.saleId)!="undefined"?av.saleId:0,ao=typeof(av.salePromotion)!="undefined"?av.salePromotion:[],aB="g_stress mallPriceBig f-mallPriceWrap",ai="g_minor mallMarketPrice f-mallPriceWrap",aj="",ap=false,au=false,ay=false,am="",ak,aD,ah,aA,ar,ax,aw,az,ag;if(ao!=null||ao!=[]){ap=true;au=I(al);if(au==true){ay=G(ao,false);if(ay){at.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">');at.push("<table>");at.push("<tr>");at.push("<td>");at.push('<div class="showSaleTimeImg fk-showSaleTimeImg">');at.push("</div>");at.push("</td>");at.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">');at.push("</td>");at.push("</tr>");at.push("</table>");at.push("</div>")}}}ak=av.name;az=al.length;for(aw=0;aw<az;aw++){ag=al[aw];aD=ag.name;ah=ag.type;aA=ag.fileId;ar=ag.value||"";if(B.trim(ar).length<1){continue}if(ah==11){aj=aB}else{if(ah==12){aj=ai}else{aj=""}}if(ah==11){am="J_mallPriceClass"}else{am=""}at.push('<p class="f-propContent '+am+'">');at.push('<span class="f-propName" title="'+aD+'">'+aD+'<span class="f-colon">:</span></span>');at.push('<span class="f-propValue '+aj+'">');if(ah==11){at.push('	<span class="f-currencyVal">'+ae.choiceCurrencyVal+"</span>");at.push('	<span class="f-mallPrice mallPrice">'+ar+"</span>")}else{if(ah==12){at.push('	<span class="f-currencyVal">'+ae.choiceCurrencyVal+"</span>");at.push('	<span class="mallPrice">'+ar+"</span>")}else{at.push(ar)}}at.push("	</span>");at.push("</p>")}an.push('<div class="f-productNameContent">');an.push('	<p class="f-productName">');if(aa.titleClick){ax=ae.productDetailUrl+"?id="+aC.id;an.push('<a class="f-productTitle" href="'+ax+'" target="_blank">');an.push(ak);an.push("</a>")}else{an.push(ak)}an.push("	</p>");an.push("</div>");an.push('<div class="f-underlineContent">');an.push('	<div class="f-underline"></div>');an.push("</div>");an.push('<div class="f-propListContent">');an.push(at.join(""));an.push("</div>");return an.join("")}function I(ah){var ag=false,ai;if(ah==null){return ag}len=ah.length;for(i=0;i<len;i++){ai=ah[i];type=ai.type;value=ai.value||"";if(B.trim(value).length<1){continue}if(type==11){ag=true;break}}return ag}function T(){if(!ae.mallOpen){return}if(aa.hiddenBuybtn){return}var ai=[],al=K.dom,ah=ae.addCartText||"",aj=ae.buyNowText||"",ak=ae.addCartClickEvent||"",ag=ae.buyNowClickEvent||"";ai.push('<div class="f-buyContent">');ai.push('	<a href="javascript:;" onclick="'+ak+'" hidefocus="true" class="fk-mall-addCart f-addCart"><span>'+ah+"</span></a>");ai.push('	<a href="javascript:;" onclick="'+ag+'" hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img">&nbsp;</span><span>'+aj+"</span></a>");ai.push("</div>");return ai.join("")}function u(ag){ag.push('<div class="f-albumsWrap J_albumsWrap">');ag.push("</div>");ag.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>');ag.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}function x(){var ah=K.dom,ag=K.data;ah.productDetailContent.empty();ah.productDetailContent.append(J());ah.productBuyContent.empty();ah.productBuyContent.append(T())}function af(){var ah=K.dom,ag=K.data;nowData=ag.nowData,multiContentRight=ah.multiContentRight,propList=nowData.propList||[],saleId=typeof(nowData.saleId)!="undefined"?nowData.saleId:0,salePromotion=typeof(nowData.salePromotion)!="undefined"?nowData.salePromotion:[],showSaleCountDownFlag=false,beginTime="",endTime="";ae.saleShowType=1;if(salePromotion!=null&&salePromotion!=[]){showSaleMsg=true;findPriceFlag=I(propList);if(findPriceFlag==true){showSaleCountDownFlag=G(salePromotion,true);if(!showSaleCountDownFlag){multiContentRight.find(".J_saleProTimeCount").remove();beginTime=salePromotion.beginTime;endTime=salePromotion.endTime;if(beginTime==null||beginTime==""||endTime==null||endTime==""){N(salePromotion)}}}}}function v(aw,aB,ah,ak){var al=[],aA=K.dom,au=aA.multiContentRight,at="",aC=LS.salePromotionBegin,ar=LS.salePromotionEnd,an=0,ap="g_stress mallPriceBig",ay="g_minor mallMarketPrice",ai,az,aj,am,ao,av,aq,ag,ax;if(ah==1){at=aC;an=aw}else{at=ar;an=aB}if(ah=="2"){N(ak)}clearInterval(ae.saleCountTimeInterval);ae.saleCountTimeInterval=setInterval(function(){ai=parseInt(an/(3600*24));az=parseInt(an/3600)-(ai*24);aj=parseInt(an/60)-(ai*24*60)-(az*60);am=parseInt(an%60);an--;ao=Fai.format(at,ai,az,aj,am);au.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+ao);if(an<0){if(ah==1){an=aB;at=ar;ah=2;N(ak)}else{clearInterval(ae.saleCountTimeInterval);au.find(".J_saleRemove").remove();if(ak.other.ruleData.s=="1"){au.find(".J_newMallPriceClass").find(".f-propValue").addClass(ap);au.find(".J_newMallPriceClass").find(".f-propValue").removeClass(ay);au.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice")}}}},1000)}function G(am,ak){var ah=false,ag=am.beginTime,ai=am.endTime,al=new Date().getTime()+ae.timeDiff,aj,an;if(typeof(ag)=="undefined"||ag==null||ag==""||typeof(ai)=="undefined"||ai==null||ai==""){return ah}aj=new Date(ag.replace(/-/g,"/")).getTime();an=new Date(ai.replace(/-/g,"/")).getTime();if(aj>al||an>al){ah=true}if(ak){if(aj>al){v(parseInt((aj-al)/1000),parseInt((an-aj)/1000),1,am)}else{if(an>al){v(parseInt((aj-al)/1000),parseInt((an-al)/1000),2,am)}}}return ah}function N(av){if(ae.saleShowType!="1"){return}ae.saleShowType=2;var ap=[],ao=[],al=K.dom,ai=al.multiContentRight,aw="g_stress mallPriceBig f-mallPriceWrap",at="g_minor mallMarketPrice f-mallPriceWrap",ax,au,aq,ar,ak,ah,an,ag;if(typeof(av)=="undefined"||av==null||av==""){return}var aj=ai.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(typeof(aj)=="undefined"||aj==null||aj==""){aj="#cf0000"}if(av.saleType=="1"){ar="";ak=parseFloat(av.other.ruleData.d[0].m);ah=B(".J_mallPriceClass").find(".f-propName").attr("title");an=parseFloat(B(".J_mallPriceClass").find(".f-mallPrice").html());if(isNaN(an)){an=0}ag=0;if(av.other.ruleData.s=="1"){ar=Fai.format(LS.salePromotionDisCount,ak);ag=an*(ak/10)}else{ar=Fai.format(LS.salePromotionLapse,ak);ag=an-ak}if(isNaN(ag)||ag<0){ag=0}ao.push('<p class="f-propContent J_newMallPriceClass">');ao.push('<span class="f-propName" title="'+ah+'">'+ah+'<span class="f-colon">:</span></span>');ao.push('<span class="f-propValue '+at+'">');ao.push('<span class="f-currencyVal">'+ae.choiceCurrencyVal+"</span>");ao.push('<span class="mallPrice">'+an.toFixed(2)+"</span>");ao.push("</span>");ao.push("</p>");B(".J_mallPriceClass").before(ao.join(""));B(".J_mallPriceClass").find(".f-propName").html(LS.promotionPrice+"<span class='f-colon'>:</span>");B(".J_mallPriceClass").find(".f-mallPrice").html(ag.toFixed(2));B(".J_mallPriceClass").find(".f-propName").attr("title",LS.promotionPrice);B(".J_mallPriceClass").addClass("J_saleRemove");ap.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>');ap.push('<td class="fk-saleTdSty1">');ap.push('<div  class="f-trangle " style="border-bottom: 5px solid '+aj+';">');ap.push("</div>");ap.push("</td>");ap.push('<td class="fk-saleTdSty2">');ap.push('<div class="f-rect" style="background-color:'+aj+';"  title="'+av.name+'">');ap.push(ar);ap.push("</div>");ap.push("</td>");ap.push("</tr></table></span>");B(".J_mallPriceClass").find(".f-propValue").append(ap.join(""))}else{ax=av.other.ruleData.d.length;au=ax*20+(ax-1)*12+"px";ap.push('<p class="f-propContent J_saleRemove">');ap.push('<span class="f-propName" title="'+LS.salePromotionName+'" style="height:'+au+'">'+LS.salePromotionName+'<span class="f-colon">:</span></span>');ap.push('<span class="f-propValue fk-saleRelative" style="height:'+au+'">');ap.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+av.name+'">');for(var am=0;am<ax;am++){if(am!=0){aq="top:"+(am*30)+"px"}else{aq="top:0"}ap.push('<span class="fk-saleAbsolute" style="'+aq+'">');ap.push('<span class="saleFullReBg" style="margin:0;background-color:'+aj+';">');ap.push(Fai.format(LS.salePromotionOnlyFullReduce));ap.push("</span>");ap.push('<span style="margin:0;color:'+aj+'">');ap.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,av.other.ruleData.d[am].m,av.other.ruleData.d[am].n));ap.push("</span>");ap.push("</span>")}ap.push("</span>");ap.push("	</span>");ap.push("</p>");ai.find(".J_mallPriceClass").after(ap.join(""))}}function o(ai){var aj=K.data,ah={src:"",width:-1,height:-1},ag={};B.extend(ag,ah,ai);E(ag)}function V(){var aj=K.data,ai=aj.nowData,ak,ah,ag;if(ai){ak=ai.picPath;ah=ai.picwidth;ag=ai.picHeight;o({src:ak,width:ah,height:ag})}}function E(al){var aj=K.dom,ah=aj.productImg,ag=al.src||"",an=390,ao=390,ak=new Image(),am=ah.find(".J_nowImg"),ai,ap;if(B.trim(ag).length<1){Fai.ing("找不到该图片",true)}if(am.length>0){if(am.attr("src")==B.trim(ag)){return}}ah.empty().append('<div class="f-productImgLoading"></div>');if(L&&L.onload){L.onload=function(){}}ak.onload=function(){var aw=false,av=false,ar="",au=[],at=[],aq,ax;ai=ak.width;aq=ai;ap=ak.height;ax=ap;if(ai>=ap&&ai>an){aw=true;aq=an}else{if(ap>ao){av=true;ax=ao}}if(aw){ar+="width:"+aq+"px;"}if(av){ar+="height:"+ax+"px;"}if(aw&&!av){ax=an*ak.height/ak.width}if(!aw&&av){aq=ao*ak.width/ak.height}if(!aa.picZoom&&aa.picPopup){at.push('	<a class="f-imgClick" href="'+ag+'" target="_blank" title="点击查看大图">');at.push('		<img class="J_nowImg " src="'+ag+'" style="'+ar+'" />');at.push("	</a>")}else{at.push('	<img class="J_nowImg " src="'+ag+'" style="'+ar+'" />')}au.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">');au.push("	<tr>");au.push("		<td>");au.push(at.join(""));au.push("		</td>");au.push("	</tr>");au.push("</table>");if(aa.picZoom){at=[];at.push(au.join(""));au=[];au.push('<div class="cloud-zoom f-imgWrap" href="'+ag+'">');au.push(at.join(""));au.push("</div>")}ah.empty();ah.append(au.join(""));if(aa.picZoom){am=ah.find(".cloud-zoom");am.attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+an+", maxHeight:"+ao+',position:"inside"');am.CloudZoom({imageHeight:ap,imageWidth:ai});if(aa.picPopup){setTimeout(function(){ah.find(".mousetrap").append('<a href="'+ag+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看大图"></a>')},30)}}};L=ak;setTimeout(function(){ak.src=ag},50)}function b(ai){var an=[],ao=[],ar=68,ap=0,am=K.data,ai=am.id,au=false,av="",at="",ah=0,ak=0,ag,aj,al,aq;aq=q.length;for(al=0;al<aq;al++){if(q[al].id==ai){ag=q[al];au=true;break}}if(!au){return""}aj=ag.picPathList||[];aq=aj.length;for(al=0;al<aq;al++){av=aj[al].thumbPath;at=aj[al].path;ah=aj[al].picWidth;ak=aj[al].picHeight;ao.push("<li>");ao.push('	<a href="javascript:;" class="J_pic" onclick="return false;" path="'+at+'" picwidth="'+ah+'" picheight="'+ak+'" >');ao.push('		<img src="'+av+'" style="display: block; width:60px; height:60px;" />');ao.push("	</a>");ao.push("</li>");ap+=ar}an.push('			<div class="f-imgListOuter J_imgListOuter">');an.push('				<ul class="f-imgList J_imgList" style="width:'+ap+'px;" _num="0">');an.push(ao.join(""));an.push("				</ul>");an.push("			</div>");return an.join("")}function a(){var ai=K.dom,ah=K.data,ag=ai.groupBtn;ag.left.removeClass("f-BtnDisabled f-BtnEnabled");ag.right.removeClass("f-BtnDisabled f-BtnEnabled");ai.imgListWrap.empty();ai.imgListWrap.append(b(ah.id));ai.imgListOuter=ai.imgListWrap.find(".J_imgListOuter");ai.imgList=ai.imgListWrap.find(".J_imgList");ai.imgList.find(".J_pic").hover(function(){o({src:B(this).attr("path"),width:B(this).attr("picwidth"),height:B(this).attr("picheight")})})}function p(){var ak=[],al=[],ag=90,ao=0,ai,an,ah;if(q&&q.length>0){for(var aj=0,am=q.length;aj<am;aj++){ai=q[aj];an=ai.picThumbPath||"";ah=ai.id;al.push("<li>");al.push('	<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+ah+'">');al.push('		<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+ah+'" _id="'+ah+'">');al.push('			<img src="'+an+'" style="display: block; width:80px; height:80px;" />');al.push("		</a>");al.push('		<div class="f-albumsImgTip"></div>');al.push("	</div>");al.push("</li>");ao+=ag}ak.push('<div class="f-albumsOuter J_albumsOuter">');ak.push('	<ul class="f-albums J_albums" style="width:'+ao+'px;" _num="0">');ak.push(al.join(""));ak.push("	</ul>");ak.push("</div>")}return ak.join("")}function k(){var ah=K.dom,ag;ah.albumsWrap.empty();ah.albumsWrap.append(p());ah.albumsOuter=ah.albumsWrap.find(".J_albumsOuter");ah.albums=ah.albumsWrap.find(".J_albums");ah.albumsImgWrap=ah.albums.find(".J_albumsImgWrap");ag=ah.albums.children().first().outerWidth()||90,ah.albums.find(".J_albumsImg").click(function(){var aj=B(this).attr("_id"),ai=c(aj);e(aj)});t({index:C,visibleNum:2});ac()}function m(){var ah=K.dom,ag=K.data;ah.albumsImgWrap.removeClass("f-albumsImgWrap-selected");ah.albumsImgWrap.filter(".J_albumsImgWrap"+ag.id).addClass("f-albumsImgWrap-selected")}function H(ah){var ag=K.dom,ak=ag.albums,ao=ag.albumsOuter,ai=ag.albumsBtn,aj=0,al={content:ak,contentOuter:ao,button:ai,scrollRow:true,visibleNum:2},an={},am=ah.changeProduct||false;B.extend(an,al,ah);if(an.scrollRow){s(an)}else{aj=ad(an);t({index:aj,visibleNum:2});r(aj)}Q(an)}function X(ak){var am=K.dom,al=am.imgList,ag=am.imgListOuter,aj=am.groupBtn,ai={content:al,contentOuter:ag,button:aj,scrollRow:true},ah={};B.extend(ah,ai,ak);s(ah);Q(ah)}function s(ak){var ao=ak.content,ah=ao.children(),am=ah.length,an=ah.first().outerWidth(),al=ak.contentOuter.width(),at=parseInt(al/an),ar=ak.visibleNum||0,aq=at-ar,ai=parseInt((am-ar)/aq),ag=parseInt(ao.attr("_num"))||0,aj=0,ap=ak.direction;if(am<=at){ai=0}else{if((ai*aq-am)>=0){ai-=1}}if(ap){aj=ag+1;if(aj>ai){aj=0;ao.stop(true).animate({left:"0"});ao.attr("_num",aj)}else{ao.stop(true).animate({left:-(aj*aq*an)+"px"});ao.attr("_num",aj)}}else{aj=ag-1;if(aj<0){aj=ai}ao.stop(true).animate({left:-(aj*aq*an)+"px"});ao.attr("_num",aj)}}function t(al){var ai=K.dom,aq=ai.albums,ah=aq.children(),ao=ah.length,ap=ah.first().outerWidth(),am=ai.albumsOuter.width(),av=parseInt(am/ap),au=al.visibleNum||0,at=av-au,aj=0,ag=parseInt(aq.attr("_num"))||0,ak=0,ar=0,an=al.index;if(au>parseInt(av/2)){au=parseInt(av/2);at=av-au}if(ao>av&&an>=at){aj=parseInt((ao-au)/at);if((aj*at-ao)>=0){aj-=1}ak=parseInt((an-au)/at);ar=parseInt(an/at)}else{aj=0;ak=0;ar=0}if(ak>aj){ak=0}else{if(ak<0){ak=aj}}if(ag==ak||ag==ar){return}aq.stop(true).animate({left:-(ak*at*ap)+"px"});aq.attr("_num",ak)}function ad(am){var aq=am.content,ai=aq.children(),ao=ai.length,ap=ai.first().outerWidth(),an=am.contentOuter.width(),ah=0,ag=C,ar=am.direction,au=0,at=1,ak=am.cycle||false,aj,al;aj=ao-(ao%at);if(ar){al=ag+at;if(al<aj){au=al}else{if(ag>aj){au=0}else{if(aj==ao){au=aj-1;if(ak){au=0}return au}if(aj==ag){au=aj;return au}au=aj}}}else{al=ag-at;if(al>ah){au=al}else{if(ag<ah){au=0}else{au=ah;if(ah==ag){if(ak){au=ao-1}return au}}}}return au}function Q(ak){var ap=ak.content,ah=ap.children(),an=ah.length,ao=ah.first().outerWidth(),al=ak.contentOuter.width(),am=ak.button,at=parseInt(al/ao),ar=ak.visibleNum||0,aq=at-ar,ai=parseInt((an-ar)/aq),ag=parseInt(ap.attr("_num"))||0,aj=0;if(an<=at){ai=0}else{if((ai*aq-an)>=0){ai-=1}}aj=ag+1;if(aj>ai){aj=0;am.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{am.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}aj=ag-1;if(aj<0){am.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{am.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}}function ac(){var am=K.dom,al=am.albums,ag=am.albumsOuter,ak=am.albumsBtn,aj=0,ai={content:al,contentOuter:ag,button:ak,scrollRow:true},ah={};B.extend(ah,ai,{scrollRow:true});Q(ah)}function W(){var al=K.dom,ak=al.imgList,ag=al.imgListOuter,aj=al.groupBtn,ai={content:ak,contentOuter:ag,button:aj,scrollRow:true},ah={};B.extend(ah,ai,{scrollRow:true});Q(ah)}function Z(ai){var aj=[],ah,ag;aj.push(ai.qsUrl);aj.push("&cmd=list");B.ajax({type:"get",cache:false,url:Site.genAjaxUrl("productSlide_h.jsp")+aj.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(am){var ak=B.parseJSON(am),al=K.data;if(ak.success){q=ak.list;aa=ak.setInfo;ae=ak.data;R=ae.css;if(Fai.top._manageMode){y=ak.itemList}if(q.length<1){Fai.ing("没有产品信息");return}ah=new Date().getTime();ag=ae.svrTimeLong;ae.timeDiff=ag-ah;ae.saleShowType=1;ae.saleCountTimeInterval="";if(ae.productId==-1){al.id=q[0].id}else{al.id=ae.productId}C=c(al.id);if(C==-1){Fai.ing("没有该产品信息");return}else{al.nowData=q[C]}n()}else{Fai.ing("获取数据失败",false)}}})}function j(){if(!aa.shareShow){return}K.dom.shareContent.addClass("f-shareContentIniting");clearTimeout(h);h=setTimeout(function(){var ag=[];ag.push("cmd=share");ag.push("&id="+K.data.id);ag.push("&browserTitle="+Fai.top.document.title);B.ajax({type:"post",url:Site.genAjaxUrl("productSlide_h.jsp"),data:ag.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",false)},success:function(aj){var ai=B.parseJSON(aj),ak=K.dom,ah="";if(ai.success){ah=ai.content||""}else{Fai.ing("获取数据失败",false)}ak.shareContent.removeClass("f-shareContentIniting");ak.shareContent.empty().append(ah)}})},300)}function c(aj){var ah=-1,ai,ag;if(q&&q.length>0){ag=q.length;for(ai=0;ai<ag;ai++){if(q[ai].id==aj){ah=ai;break}}}return ah}function r(ag){if(C==ag){return}if(q&&q[ag]){e(q[ag].id)}}function e(ai){var ag=-1,ah=K.data;ag=c(ai);if(ag==-1){Fai.ing("没有该产品信息");return}else{if(ag==C){return}}C=ag;ah.id=parseInt(ai);ah.nowData=q[C];d()}function d(){K.dom.imgList=null;V();x();af();a();j();m();setTimeout(function(){Y()},50)}function F(ah){var ag=new Image();ag.src=ah}function Y(){var ak=K.data,aj=ak.nowData,ai=aj.picPathList||[],ah,ag;ag=ai.length;for(ah=0;ah<ag;ah++){F(ai[ah].path)}}function ab(){var ag=K.dom;ag.productDetailContent.empty();ag.productBuyContent.empty();ag.productImg.empty();ag.imgListWrap.empty();ag.albumsWrap.empty();ag.shareContent.empty()}function M(){q=null;C=-1;L=null;h=null;ae=null;aa=null;K.data={}}function g(){var aj=K.dom,ag=aj.panel,al=aj.panelBtn,ai=aj.groupBtn,ah=aj.albumsBtn,ak;al.close.click(function(){P()});al.left.click(function(){H({scrollRow:false,direction:false,cycle:true,changeProduct:true})});al.right.click(function(){H({scrollRow:false,direction:true,cycle:true,changeProduct:true})});ah.left.click(function(){H({scrollRow:true,direction:false})});ah.right.click(function(){H({scrollRow:true,direction:true})});ai.left.click(function(){X({scrollRow:true,direction:false})});ai.right.click(function(){X({scrollRow:true,direction:true})});aj.contentBg.click(function(){P()});aj.productPicContent.hover(function(){if(!aj.imgList){return}var am=aj.imgList.children();if(am&&am.length<2){return}ak=setTimeout(function(){aj.productImgGroup.slideDown("normal",function(){W()})},250)},function(){clearTimeout(ak);aj.productImgGroup.slideUp()});aj.content.mouseleave(function(){clearTimeout(ak);aj.productImgGroup.slideUp()})}function D(ag){var ah=K.dom;ah.panel=Fai.top.$("#fk-productSlidePanel");ah.content=ah.panel.find(".J_content");ah.contentBg=ah.panel.find(".J_contentBg");ah.panelBtn={};ah.panelBtn.left=ah.panel.find(".J_turnLeft");ah.panelBtn.right=ah.panel.find(".J_turnRight");ah.panelBtn.close=ah.panel.find(".J_close");ah.multiContent=ah.panel.find(".J_multiContent");ah.albumsContent=ah.panel.find(".J_albumsContent");ah.multiContentLeft=ah.multiContent.find(".J_multiContentLeft");ah.multiContentRight=ah.multiContent.find(".J_multiContentRight");ah.productDetailContent=ah.multiContentRight.find(".J_productDetailContent");ah.productBuyContent=ah.multiContentRight.find(".J_productBuyContent");ah.shareContent=ah.multiContentLeft.find(".J_shareContent");ah.productPicContent=ah.multiContentLeft.find(".J_productPicContent");ah.productImg=ah.multiContentLeft.find(".J_productImg");ah.productImgGroup=ah.multiContentLeft.find(".J_productImgGroup");ah.imgListWrap=ah.multiContentLeft.find(".J_imgListWrap");ah.groupBtn={};ah.groupBtn.left=ah.multiContentLeft.find(".J_groupLeft");ah.groupBtn.right=ah.multiContentLeft.find(".J_groupRight");ah.albumsWrap=ah.albumsContent.find(".J_albumsWrap");ah.albumsBtn={};ah.albumsBtn.left=ah.albumsContent.find(".J_albumsLeft");ah.albumsBtn.right=ah.albumsContent.find(".J_albumsRight");if(typeof ag.func=="function"){setTimeout(function(){ag.func.apply(K,arguments)},30)}}function n(){U({func:function(){var ah=K.dom;if(ah.panel&&ah.panel.length>0){if(ah.panel.is(":hidden")){ah.panel.show()}}else{Fai.top.$("#fk-productSlidePanel").show()}V();x();af();a();k();j();m();setTimeout(function(){Y()},50)}});if(Fai.top._manageMode&&y&&y.length>0){var ag=K.dom.content;ag.off("mousemove.productSlide").on("mousemove.productSlide",function(){Site.addEditLayer("fk-productSlideContent",y,100,{extCls:"fk-productSlideEditLayer"})});ag.off("mouseleave.productSlide").on("mouseleave.productSlide",function(){Site.removeEditLayer("fk-productSlideContent")})}}function P(){var ag=K.dom;if(Fai.top._manageMode&&y){Site.removeEditLayer("fk-productSlideContent")}ag.panel&&ag.panel.hide();M();K.dom={};f="";R="";y=null;Fai.top.$("#fk-productSlidePanel").remove()}K.init=function(ag){P();Fai.top.$("body").append(w().join(""));f=ag;Z({qsUrl:ag});D({func:g})};K.refresh=function(){ab();M();Z({qsUrl:f})};function U(ah){if(Fai.top.$("#fk-productSlideCss").length<1&&B.trim(R).length>0){var ag=document.createElement("link");ag.setAttribute("type","text/css");ag.setAttribute("rel","stylesheet");ag.setAttribute("href",R);ag.setAttribute("id","fk-productSlideCss");Fai.top.$("head").append(ag);ag.onload=function(){if(typeof ah.func=="function"){ah.func.apply(K,arguments)}}}else{if(typeof ah.func=="function"){ah.func.apply(K,arguments)}}}})(jQuery,Site.productSlide);