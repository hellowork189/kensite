Site.ImageEffect=!!Site.ImageEffect?Site.ImageEffect:{};(function(a,c,b){c.DATA={};c.DATA.imageEffectHtml="<div class='imageEffects imageEffectsAnimate'></div>";c.DATA.KEY={OPT_MODULE_ID:"moduleId",OPT_IMG_EFF_OPTION:"imgEffOption",OPT_TG_OPTION:"tagetOption",OPT_CALLBACK:"callback",OPT_CALLBACK_ARGS:"callbackArgs",FULL_MASK_BG_STYLE:"fmbgs",FULL_MASK_NAME_STYLE:"fmns",FULL_MASK_NAME_ALIG:"fmna",FULL_MASK_DISC_STYLE:"fmds",FULL_MASK_DISC_ALIG:"fmda",FULL_MASK_CUS_BG:"fullMaskCusBg",FULL_MASK_CUS_NAME:"fullMaskCusName",FULL_MASK_CUS_DISC:"fullMaskCusDisc",FULL_MASK_OPEN_DISC:"fullMaskOpenDisc",ALIG:{CENTER:1,LEFT:2,RIGHT:3}};c.FUNC={BASIC:{},BUS:{},TOOL:{}};c.ITF={cardTd:Site.bindImageEffectCusEvent_photo,"photo-container":Site.bindImageEffectCusEvent_photo,photoForm:Site.bindImageEffectCusEvent_photo,photoMarqueeForm:Site.bindImageEffectCusEvent_photo,photoSmallPic_table:Site.bindImageEffectCusEvent_photo,productTileForm:Site.bindImageEffectCusEvent_product,productMarqueeForm:Site.bindImageEffectCusEvent_product,"product-container":Site.bindImageEffectCusEvent_product,productDoublePicListForm:Site.bindImageEffectCusEvent_product,containerLeft:Site.bindImageEffectCusEvent_product,productHotTextListHot:Site.bindImageEffectCusEvent_product,productPicListForm:Site.bindImageEffectCusEvent_product}})(jQuery,Site.ImageEffect);(function(a,c,b){c.FUNC.TOOL.resetImgEff=function(d,f,l,o){var g=d.targetParent;var h=a(f).find("img");var m=a(h).position().top;var e=a(h).position().left;var k=a(h).width();var j=a(h).height();var n=a(h).css("margin-left");var i=a(l).css("border-left-width");n=c.FUNC.TOOL.parsePixelToInt(n);i=c.FUNC.TOOL.parsePixelToInt(i);if(g=="photoSmallPic_table"){a(l).css("left",e+n).css("top",m);a(l).css("width",k-(i*2)+"px");a(l).css("height",j-(i*2)+"px")}if(g=="photo-container"||g=="product-container"){if(o!=5){a(l).css("left",e+n).css("top",m)}else{a(l).css("left",e+n)}}};c.FUNC.TOOL.parsePixelToInt=function(d){var e;if(typeof d=="undefined"||d=="auto"){e=0}else{e=parseInt(d.replace("px"))}return e};c.FUNC.TOOL.colorRgb=function(e){var g=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var e=e.toLowerCase();var d="#";var h=[];if(e&&g.test(e)){if(e.length===4){for(var f=1;f<4;f+=1){d+=e.slice(f,f+1).concat(e.slice(f,f+1))}e=d}for(var f=1;f<7;f+=2){h.push(parseInt("0x"+e.slice(f,f+2)))}return h.join(",")}else{return e}}})(jQuery,Site.ImageEffect);(function(c,e,d){e.FUNC.BUS.bindImgEffCusEvent=function(g,f){if(typeof e.ITF[f.targetParent]=="function"){e.ITF[f.targetParent](g,f)}};e.FUNC.BUS.ImgEffAnimate=function(j,f,i){var h={hover:{},leave:{}};var g=c(f).attr("fk_fixed");if(!!!g){b(f,i)}a(h,f,i);if(!Fai.isIE()){if(j=="mouseenter"){c(f).css(h.hover)}else{if(j=="mouseleave"){c(f).css(h.leave)}}}else{if(j=="mouseenter"){c(f).stop().animate(h.hover,250)}else{if(j=="mouseleave"){c(f).stop().animate(h.leave,250)}}}};function a(o,p,h){var m=h.effType;var n=1;var j;if(c(p).parent().hasClass("cardDiv")){j=c(p).parent()}if(Fai.isIE6()||Fai.isIE7()||Fai.isIE8()){if(h.backgroundType){n=h.fullmaskBackgroundOpacity}else{n=80}if(h[e.DATA.KEY.FULL_MASK_CUS_BG]){var g=h[e.DATA.KEY.FULL_MASK_BG_STYLE];if(typeof g=="string"&&g.length>0){var f=c.parseJSON(g);n=typeof f.o=="number"?f.o:80}}n/=100}switch(m){case 2:o.hover.opacity=1;o.leave.opacity=0;break;case 3:o.hover.opacity=1;o.leave.opacity=0;break;case 4:o.hover.opacity=n;o.leave.opacity=0;break;case 5:c(p).css("opacity",1);o.hover.bottom=0;o.leave.bottom="-"+c(p).height()+"px";var i;if(j&&j.length>0){i=parseFloat(j.css("margin-top").replace("px",""));o.hover.bottom=-i;o.leave.bottom=(-i-c(p).height())+"px"}break;case 6:var l=parseInt(c(p).attr("_initWidth"));var k=parseInt(c(p).attr("_initHeight"));o.hover.width=l+50;o.hover["margin-left"]="-25px";o.hover.height=k+50;o.hover["margin-top"]="-25px";o.leave.width=l;o.leave["margin-left"]="0px";o.leave.height=k;o.leave["margin-top"]="0px";break;case 7:o.hover["margin-left"]="-10px";o.leave["margin-left"]="0px";break}}function b(r,k){var p=k.effType;if(p==4){var s=c(r).find(".props .propList");var f=c(s).height();var m=c(r).height();var o=((m-f)/2);c(s).css("padding-top",o+"px")}if(p==5){var s=c(r).find(".props .propList");var j=c(r).find(".props .propBuy");var h=c(s).height();var l=parseInt(c(s).css("padding-top"));var n=parseInt(c(s).css("margin-bottom"));var q=c(r).parent().find("img").position().left;h+=l+n;if(c(j).length>0){var i=parseInt(c(j).css("margin-top"));var g=c(j).height()+i+8;h+=g}c(r).css({height:h+"px",bottom:"-"+h+"px",left:q+"px"})}c(r).attr("fk_fixed",1)}})(jQuery,Site.ImageEffect);(function(f,h,g){h.FUNC.BASIC.Init=function(j){var m={};m[h.DATA.KEY.OPT_MODULE_ID]=0;m[h.DATA.KEY.OPT_IMG_EFF_OPTION]={};m[h.DATA.KEY.OPT_TG_OPTION]={};m[h.DATA.KEY.OPT_CALLBACK]=g;m[h.DATA.KEY.OPT_CALLBACK_ARGS]=g;if(!!!e(j,m)){return}var l=f("#module"+m[h.DATA.KEY.OPT_MODULE_ID]);var k=m[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType;if(k==1||Fai.isNull(l)){return}var n=f(l).find(".imageEffects");var i=f(l).find("."+m[h.DATA.KEY.OPT_TG_OPTION].target);if(f(n).length>0){f(n).remove()}f.each(i,function(o,p){if(k>1&&k<6){h.FUNC.BASIC.CreateGE(p,m);h.FUNC.BUS.bindImgEffCusEvent(p,m[h.DATA.KEY.OPT_TG_OPTION]);if(k==4||k==5){if(!Fai.isNull(m[h.DATA.KEY.OPT_CALLBACK])){m[h.DATA.KEY.OPT_CALLBACK](p,m[h.DATA.KEY.OPT_IMG_EFF_OPTION],m[h.DATA.KEY.OPT_TG_OPTION],m[h.DATA.KEY.OPT_CALLBACK_ARGS])}}}else{if(k<=7){h.FUNC.BASIC.CreateSP(p,m)}}});if(k==8){Site.hoverChangeImage()}else{f(i).bind("mouseenter mouseleave",function(p){var o=f(this).find(".imageEffects");if(k<6){h.FUNC.TOOL.resetImgEff(m[h.DATA.KEY.OPT_TG_OPTION],this,o,k)}else{if(k<=8){o=f(this).find("img")}}if(p.type=="mouseenter"){if(k>1&&k<=7){h.FUNC.BUS.ImgEffAnimate("mouseenter",o,m[h.DATA.KEY.OPT_IMG_EFF_OPTION])}}else{if(k>1&&k<=7){h.FUNC.BUS.ImgEffAnimate("mouseleave",o,m[h.DATA.KEY.OPT_IMG_EFF_OPTION])}}})}};h.FUNC.BASIC.CreateGE=function(j,i){c(j,i);b(j,i)};h.FUNC.BASIC.CreateSP=function(j,i){a(j,i);d(j,i)};function e(i,j){if(i.length==0){return false}if(i[h.DATA.KEY.OPT_MODULE_ID]==0){return false}f.extend(j,i);return true}function c(j,i){var k=!Fai.isNull(f(j).find("a"))&&f(j).find("a").length!=0;if(k){f(j).find("a").after(h.DATA.imageEffectHtml)}else{f(j).find("img").after(h.DATA.imageEffectHtml)}}function b(D,C){f(D).css("position","relative").css("overflow","hidden");if(Fai.isIE6()&&C[h.DATA.KEY.OPT_TG_OPTION].targetParent=="photoSmallPic_table"){f(D).removeAttr("style")}var v=C[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType;var l=f(D).find(".imageEffects"),y=(v==2)?"imageEffects_Border":(v==3)?"imageEffects_Magnifier":(v==4)?"imageEffects_FullMaks":(v==5)?"imageEffects_HalfMaks":"";var x={bw:(C[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?C[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderWidth:1,bs:(C[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?C[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderStyle:1,bc:(C[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?C[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderColor:"#000"},B=(x.bs==1)?"solid":(x.bs==2)?"dotted":(x.bs==3)?"dashed":"",w=C[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.FULL_MASK_BG_STYLE],j={fbc:C[h.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundColor,fbo:C[h.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundOpacity},o={color:"#555555",opacity:80};var F,t,A,q,r,k,E,n;if(C.moduleType=="photoCard"){F=f(D).parent();t=f(F).width();A=f(F).height();q=f(F).css("margin-left");imgMarginTop=f(F).css("margin-top");r=f(F).position().top;k=f(F).position().left;E=parseFloat(f(D).css("margin-top").replace("px",""));n=parseFloat(f(D).css("margin-left").replace("px",""))}else{F=f(D).find("img");t=f(F).width();A=f(F).height();q=f(F).css("margin-left");r=f(F).position().top;k=f(F).position().left}var p=Fai.isIE6()||Fai.isIE7()||Fai.isIE8();var m=C[h.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundType;if(typeof j=="object"&&m){o.color=j.fbc.length!=0?j.fbc:o.color;o.opacity=typeof j.fbo=="number"?j.fbo:o.opacity}var s=C[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.FULL_MASK_CUS_BG];if(typeof w=="string"&&w.length!=0&&s){w=f.parseJSON(w);o.color=w.c.length!=0?w.c:o.color;o.opacity=typeof w.o=="number"?w.o:o.opacity}q=h.FUNC.TOOL.parsePixelToInt(q);switch(v){case 1:f(l).css("top",r);break;case 2:t-=x.bw*2;A-=x.bw*2;f(l).css("border",x.bw+"px "+B+" "+x.bc);f(l).css("top",r);break;case 3:f(l).css("top",r);break;case 4:var z=o.color;if(!p){var i=h.FUNC.TOOL.colorRgb(o.color);var u=i.split(",");z="rgba("+u[0]+", "+u[1]+", "+u[2]+", "+o.opacity/100+")"}f(l).css("background",z);f(l).css("top",r);break;case 5:f(l).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half");f(l).css("bottom","-"+A+"px");break;case 6:f(l).css("top",r);break;case 7:f(l).css("top",r);break}f(l).css("width",t).css("height",A+"px");if(C.moduleType=="photoCard"){f(l).css({left:(-n)+"px"});if(v!=5){f(l).css({top:(-E)+"px"})}}else{f(l).css("left",k+q)}f(l).addClass(y)}function a(m,l){var k=f(m).find("img");if(l[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==6){var j=f(k).width();var i=f(k).height();f(k).attr("_initWidth",j).attr("_initHeight",i)}if(l[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==7){var j=f(k).width();f(k).css("width",j+10+"px")}}function d(j,i){var k=(i[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==6)?"imageEffectsAnimate_Magnify":"imageEffectsAnimate_MoveLeft";f(j).css({overflow:"hidden"});f(j).find("img").addClass(k).css("margin","0px")}})(jQuery,Site.ImageEffect);